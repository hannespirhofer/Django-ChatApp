{% extends "base.html" %}
{% block content %}
<p>Please log in to join the chatroom or <a href="/register">Register here</a></p>
<form action="{% url 'login' %}{% if next %}?next={{ next }}{% endif %}" method="post">
{% csrf_token %}
<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
    <input
    class="mdl-textfield__input"
    name="username"
    id="username"
    type="text"
    />
    <label class="mdl-textfield__label" for="sample3">Text</label>
</div>
<br>
<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
    <input
    class="mdl-textfield__input"
    name="password"
    id="password"
    type="password"
    />
    <label class="mdl-textfield__label" for="sample3">Password</label>
</div><br>
<button
    class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
    id="submit"
    type="submit"
    >
    Login
</button>
{% if error_message %}
    {{ error_message }}
{% endif %}
</form>

{% block extra_scripts %}
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const usernameField = document.getElementById("username");
        const passwordField = document.getElementById("password");
        const loginButton = document.getElementById("submit");

        function toggleButtonState() {
            if (usernameField.value.trim() && passwordField.value.trim()) {
                loginButton.disabled = false;
            } else {
                loginButton.disabled = true;
            }
        }

        usernameField.addEventListener("input", toggleButtonState);
        passwordField.addEventListener("input", toggleButtonState);

        //Initial check in case there are prefilled values from the browser
        toggleButtonState();
    });
</script>
{% endblock %}
{% endblock %}